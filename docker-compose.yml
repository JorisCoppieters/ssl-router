version: '3'
services:
  ssl-router:
    image: joris/ssl-router:v1-latest
    build: ./
    hostname: ssl-router
    container_name: ssl-router
    volumes:
      - letsencrypt-data:/etc/letsencrypt
    environment:
      - EMAIL=joris.coppieters@gmail.com
      - DOMAIN=test.code-transform.com
      - INTERNAL_DOMAIN=site
      - INTERNAL_PORT=80
      - HTTP_PORT=8080
      - HTTPS_PORT=8090
      - CERT_GENERATOR=injected
      - CERT_ENCODED=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
      - CERT_PWD=RhAjxVKMUYdQozgNiFZy
    ports:
      - "8080:80"
      - "8090:443"

  site:
    image: library/httpd:2.4
    hostname: site
    container_name: site
    ports:
      - "8070:80"

volumes:
  letsencrypt-data:
